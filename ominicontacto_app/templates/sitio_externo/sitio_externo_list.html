{% extends "base.html" %}
{% load static %}
{% block head_js %}
    <script type="text/javascript">

        function mostrar_sitios_ocultos() {

            $.get('{% url  'mostrar_sitios_externo_ocultos' %}',
                    function (data) {
                        $('#t_body_ocultas').html(data);

                    });
        }

    </script>
{% endblock %}

{% block content %}

<h1>Sitios externos</h1>
<a class="btn btn-light btn-sm" href="#" onclick="mostrar_sitios_ocultos()" >
    Mostrar ocultos
</a>
<hr>
<table class="table">
    <thead>
      <tr class="fts-table-bg">
        <th>Sitio externo</th>
        <th>Url</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody id="t_body_ocultas">
        {% for sitio in sitios_externos %}
            <tr>
                <td>
                    {{ sitio.nombre }}
                </td>
                <td>
                    {{ sitio.url }}
                </td>
                <td>
                    {% if sitio.oculto %}
                    <a class="btn btn-light" href="{% url 'desoculta_sitio_externo' sitio.pk %}" >
                        <span class="icon icon-eye" aria-hidden="true" title="visible"></span>Hacer visible
                    </a>
                    {% else %}
                    <a class="btn btn-light" href="{% url 'oculta_sitio_externo' sitio.pk %}" >
                        <span class="icon icon-eye-slash" aria-hidden="true" title="ocultar"></span>Ocultar
                    </a>
                    {% endif %}

                </td>
            </tr>
        {% empty %}
            <tr>
                <td>
                    <p>No se encontraron sitios externos creados.</p>
                </td>
            </tr>
        {% endfor %}
    </tbody>
</table>


{% endblock %}