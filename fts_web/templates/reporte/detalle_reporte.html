{% extends "base.html" %}
{% load static %}

{% block content %}
    <div class="panel panel-default">
        <!-- Default panel contents -->
        <div class="panel-heading">                
            <h4 class="inline">Detalle Reporte</h4>
            <div class="clear-fix"></div>
        </div>

        <div class="panel-body">
            <div class="col-lg-12"> 
                <table class="table table-condensed">
                    <thead>
                        <th>Campaña</th>
                        <th>Fecha Desde</th>
                        <th>Fecha Hasta</th>                     
                        <th>Base Datos</th>
                        <th>Estado</th>
                    </thead>
                    <tbody>
                        <tr class="info">
                            <td><strong>{{ campana.nombre }}</strong></td>
                            <td>
                                {{ campana.fecha_inicio|date:"d/m/Y" }}
                            </td>
                            <td>
                                {{ campana.fecha_fin|date:"d/m/Y" }}
                            </td>
                            <td>{{ campana.bd_contacto }}</td>
                            <td>{{ campana.get_estado_display }}</td>
                        </tr>
                    </tbody>
                </table>

                <table class="table table-bordered">
                    <thead>
                      <tr>                                
                        <th>Cantidad Contacto</th>                        
                        <th>Cantidad Intentos</th>
                        <th>Intentos Contestados</th>
                        <th>Intentos No Contestados</th>
                        <th>Intentos Pendientes</th>
                        <th>Intentos Erróneos</th>
                      </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                {{ campana.bd_contacto.contactos.all.count }}
                            </td>
                            <td>
                                {{ campana.intentos_de_contactos.all.count }}
                            </td>
                            <td>
                                {{ campana.obtener_intentos_contesto.count }}
                            </td>
                            <td>
                                {{ campana.obtener_intentos_no_contesto.count }}
                            </td>
                            <td>
                                {{ campana.obtener_intentos_pendientes.count }}
                            </td>
                            <td>
                                {{ campana.obtener_intentos_error_interno.count }}
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div class="col-lg-6 col-lg-offset-3">
                {% if campana.url_grafico_torta %}
                    <figure>
                        <embed type="image/svg+xml" src="{{ campana.url_grafico_torta }}" height="450"/>
                    </figure>
                {% else%} 
                    <p class="text-center text-danger">
                        <em>El reporte gráfico no fue generado.</em>
                    </p>
                {% endif %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}