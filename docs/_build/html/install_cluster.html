

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Horizontal Cluster Installation &mdash; OMniLeads develop documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="OMniLeads Maintenance" href="install_devenv.html" />
    <link rel="prev" title="Instalación desde ansible remoto" href="install_remote.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> OMniLeads
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="what_is.html">Qué es OMniLeads ?</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="install.html">Instalación de OMniLeads</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="install.html#tipos-de-instalacion">Tipos de instalación</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="install_self_hosted.html">Ansible Self-Hosted Install</a></li>
<li class="toctree-l3"><a class="reference internal" href="install_remote.html">Instalación desde ansible remoto</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Horizontal Cluster Installation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#omnileads-in-two">OMniLeads in two:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#omnileads-in-five">OMniLeads in five:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pre-requisitos">Pre-requisitos</a></li>
<li class="toctree-l4"><a class="reference internal" href="#preparacion-en-la-maquina-que-ejecuta-la-instalacion-remota">Preparación en la máquina que ejecuta la instalación remota:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#preparacion-del-archivo-inventory">Preparación del archivo <em>inventory</em>:</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="install_remote.html">Instalación desde ansible remoto</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Horizontal Cluster Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#omnileads-in-two">OMniLeads in two:</a></li>
<li class="toctree-l2"><a class="reference internal" href="#omnileads-in-five">OMniLeads in five:</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pre-requisitos">Pre-requisitos</a></li>
<li class="toctree-l2"><a class="reference internal" href="#preparacion-en-la-maquina-que-ejecuta-la-instalacion-remota">Preparación en la máquina que ejecuta la instalación remota:</a></li>
<li class="toctree-l2"><a class="reference internal" href="#preparacion-del-archivo-inventory">Preparación del archivo <em>inventory</em>:</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="install_devenv.html">OMniLeads Maintenance</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="initial_settings.html">Initial Settings</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="telephony.html">TELEFONIA</a></li>
<li class="toctree-l1"><a class="reference internal" href="telephony_settings_pbx.html">Telephony Settings - OML and the PBX</a></li>
<li class="toctree-l1"><a class="reference internal" href="telephony_settings_bpo.html">Telephony Settings - OML BPO Contact Center</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="campaigns.html">Campaigns</a></li>
<li class="toctree-l1"><a class="reference internal" href="campaigns_manual.html">Manual Call Campaign</a></li>
<li class="toctree-l1"><a class="reference internal" href="campaigns_preview.html">Preview Campaigns</a></li>
<li class="toctree-l1"><a class="reference internal" href="campaigns_dialer.html">Dialer Campaigns</a></li>
<li class="toctree-l1"><a class="reference internal" href="campaigns_inbound.html">Inbound Campaigns</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="reports.html">Telephony</a></li>
<li class="toctree-l1"><a class="reference internal" href="reports_inbound_camp.html">Telephony</a></li>
<li class="toctree-l1"><a class="reference internal" href="reports_outbound_camp.html">Telephony</a></li>
<li class="toctree-l1"><a class="reference internal" href="reports_general.html">Telephony</a></li>
<li class="toctree-l1"><a class="reference internal" href="reports_agents.html">Telephony</a></li>
<li class="toctree-l1"><a class="reference internal" href="reports_supervision.html">Telephony</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="maintance_backup.html">OMniLeads Maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="maintance_changeip.html">OMniLeads Maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="maintance_upgrades.html">OMniLeads Maintenance</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">OMniLeads</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="install.html">Instalación de OMniLeads</a> &raquo;</li>
        
      <li>Horizontal Cluster Installation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/install_cluster.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="horizontal-cluster-installation">
<h1>Horizontal Cluster Installation<a class="headerlink" href="#horizontal-cluster-installation" title="Permalink to this headline">¶</a></h1>
<p>OMniLeads puede ser desplegado de manera tal que los componentes queden separados en diferentes hosts. A diferencia de la instalación AIO (All In One)
que despliega todo OMniLeads en un único host, este método de instalación permite dividir la carga de los servicios en más de un host.</p>
<p>Puntualmente existen dos formas de instalar en cluster horizontal:</p>
<div class="section" id="omnileads-in-two">
<h2>OMniLeads in two:<a class="headerlink" href="#omnileads-in-two" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Host1 (omlvoip): Asterisk y Kamailio + rtpengine</li>
<li>Host2 (omlapp): Aplicación web, Postgres y Dialer</li>
</ul>
<img alt="_images/install_cluster_in_2.png" src="_images/install_cluster_in_2.png" />
<p><em>Figure 1: Cluster in 2 hosts</em></p>
</div>
<div class="section" id="omnileads-in-five">
<h2>OMniLeads in five:<a class="headerlink" href="#omnileads-in-five" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Host1 (omlapp): Aplicación web</li>
<li>Host2 (kamailio): Kamailio + rtpengine</li>
<li>Host3 (asterisk): Asterisk</li>
<li>Host4 (database): Postgresql</li>
<li>Host5 (dialer): Wombat dialer + MySQL</li>
</ul>
<img alt="_images/install_cluster_in_5.png" src="_images/install_cluster_in_5.png" />
<p><em>Figure 2: Cluster in 5 hosts</em></p>
</div>
<div class="section" id="pre-requisitos">
<h2>Pre-requisitos<a class="headerlink" href="#pre-requisitos" title="Permalink to this headline">¶</a></h2>
<p>Los hosts sobre los cuales vamos a desplegar los servicios en cluster deben cumplir con los siguitens requisitos:</p>
<ul class="simple">
<li>GNU/Linux CentOS 7 (minimal), Debian 9 (netinstall) ó Ubuntu Server 18.04</li>
<li>Al menos 20 GB de espacio en disco</li>
<li>Al menos 4 GB de memoria RAM</li>
<li>Si es <em>Ubuntu / Debian</em>; Instalar el paquete <em>sudo</em>, <em>openssh-server</em> y <em>phyton-minimal</em>, permitir login SSH con el usuario <em>root</em> y reiniciar el servicio de ssh para que se tomen los cambios:</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">sudo</span> <span class="n">openssh</span><span class="o">-</span><span class="n">server</span> <span class="n">python</span><span class="o">-</span><span class="n">minimal</span> <span class="o">-</span><span class="n">y</span>
<span class="n">sed</span> <span class="o">-</span><span class="n">i</span> <span class="s1">&#39;s/#PermitRootLogin prohibit-password/PermitRootLogin yes/&#39;</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">ssh</span><span class="o">/</span><span class="n">sshd_config</span>
<span class="n">systemctl</span> <span class="n">restart</span> <span class="n">ssh</span>
</pre></div>
</div>
<ul class="simple">
<li>Es muy importante dejar la hora correctamente configurada en cada host.</li>
<li>Configurar una <em>dirección IP</em> y un <em>hostname</em> fijo en cada host destino de la instalación.</li>
</ul>
</div>
<div class="section" id="preparacion-en-la-maquina-que-ejecuta-la-instalacion-remota">
<h2>Preparación en la máquina que ejecuta la instalación remota:<a class="headerlink" href="#preparacion-en-la-maquina-que-ejecuta-la-instalacion-remota" title="Permalink to this headline">¶</a></h2>
<p>Al igual que en la instalación “desde ansible remoto”, para desplegar OMniLeads en cualquiera de los dos tipos de clusters, debemos proceder con la ejecución
del script de deploy a partir de contar con el proyecto clonado sobre una estación de trabajo con GNU/Linux (deployer). Desde la misma se ejecuta la instalación
del cluster. Para generar nuestro host “deployer”, sugerimos repasar el ítem “Preparación en la máquina que ejecuta la instalación remota” dentro de la sección
“instalación desde ansible remoto”.</p>
<p>Se considera entonces que el usuario dispone del repositorio clonado en su Linux Workstation (OMniLeads deployer) !</p>
</div>
<div class="section" id="preparacion-del-archivo-inventory">
<h2>Preparación del archivo <em>inventory</em>:<a class="headerlink" href="#preparacion-del-archivo-inventory" title="Permalink to this headline">¶</a></h2>
<p>Para este tipo de despliegue, se debe configurar primero el archivo <em>/etc/hosts</em> de nuestra maquina <em>deployer</em>. Por lo que en base a cada <em>hostname</em> configurado
en cada host que compone nuestro cluster, se debe generar una entrada en el archivo mencionado anteriormente.</p>
<img alt="_images/install_dns_hosts_cluster.png" src="_images/install_dns_hosts_cluster.png" />
<p><em>Figure 3: /etc/hosts - OMniLeads deployer workstation</em></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="install_devenv.html" class="btn btn-neutral float-right" title="OMniLeads Maintenance" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="install_remote.html" class="btn btn-neutral float-left" title="Instalación desde ansible remoto" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, omnileads

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>